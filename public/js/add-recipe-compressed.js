const recipeForm=document.querySelector(".new-recipe-form"),ingredientsInput=document.querySelector("#ingredients-input"),ingredientsButton=document.querySelector("#ingredients-button"),directionsInput=document.querySelector("#directions-input"),directionsButton=document.querySelector("#directions-button"),ingredientsDisplay=document.querySelector("#showIngredients"),directionsDisplay=document.querySelector("#showDirections"),removeButton=document.querySelector(".removeButton");async function newFormHandler(e){e.preventDefault();var t=document.querySelector("#dish_name").value,n=JSON.stringify(pushIngredients()),i=JSON.stringify(pushDirections()),r="/images/thumb-placeholder.png",e=$("#recipe_type :selected").text();console.log({recipe_name:t,ingredients:n,directions:i,recipe_type:e,image:r}),(await fetch(`/recipes`,{method:"POST",body:JSON.stringify({recipe_name:t,ingredients:n,directions:i,recipe_type:e,image:r}),headers:{"Content-Type":"application/json"}})).ok?$("#exampleModal").modal("show"):alert("Failed to add recipe")}function pushIngredients(){var t=[];return $(".ingredientsValue").each(function(){var e=$(this).text().split(" ",2);t.push(e[0])}),t}function pushDirections(){var t=[];return $(".directionsValue").each(function(){var e=$(this).text().split(" ",2);t.push(e[0])}),t}ingredientsButton.addEventListener("click",function(i){i.preventDefault();i=ingredientsInput.value.trim();if(""!==i){let e=document.createElement("li"),t=document.createElement("p");t.textContent=i,t.classList.add("ingredientsValue");let n=document.createElement("button");n.innerHTML="<i class='fas fa-trash-alt'></i> Remove",n.type="button",n.classList.add("removeButton"),n.classList.add("btn-danger"),n.classList.add("btn"),e.appendChild(t),t.appendChild(n),ingredientsDisplay.appendChild(e),ingredientsInput.value=""}}),$(document).on("click",".removeButton",function(e){e.preventDefault(),$(this).parent().remove()}),directionsButton.addEventListener("click",function(i){i.preventDefault();i=directionsInput.value.trim();if(""!==i){let e=document.createElement("li"),t=document.createElement("p");t.textContent=i,t.classList.add("directionsValue");let n=document.createElement("button");n.innerHTML="<i class='fas fa-trash-alt'></i> Remove",n.type="button",n.classList.add("removeButton"),n.classList.add("btn-danger"),n.classList.add("btn"),e.appendChild(t),t.appendChild(n),directionsDisplay.appendChild(e),directionsInput.value=""}}),$(document).on("click",".removeButton",function(e){e.preventDefault(),$(this).parent().remove()}),$("#closeSuccessModal1").click(function(){$(".new-recipe-form").trigger("reset"),$("#showIngredients").empty(),$("#showDirections").empty()}),$("#closeSuccessModal2").click(function(){$(".new-recipe-form").trigger("reset"),$("#showIngredients").empty(),$("#showDirections").empty()}),document.querySelector(".new-recipe-form").addEventListener("submit",newFormHandler);